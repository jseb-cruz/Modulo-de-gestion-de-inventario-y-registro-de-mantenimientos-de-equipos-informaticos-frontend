<section class="container">
    <h2>{{ isEdit ? 'Editar Equipo' : 'Nuevo Equipo' }}</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="grid">
            <label>
                Asset Tag*
                <input formControlName="assetTag" />
                @if(form.controls.assetTag.invalid && form.controls.assetTag.touched){
                <span class="error">Requerido</span>
                }
            </label>
            <label>
                Serial*
                <input formControlName="serialNumber" />
            </label>
            <label>
                Modelo*
                <input formControlName="model" />
            </label>
            <label>
                Tipo*
                <select formControlName="type">
                    <option value="Laptop">Laptop</option>
                    <option value="Desktop">Desktop</option>
                    <option value="Printer">Printer</option>
                    <option value="Monitor">Monitor</option>
                    <option value="Server">Server</option>
                    <option value="Other">Other</option>
                </select>
            </label>
            <label>
                Estado*
                <select formControlName="status">
                    <option value="Available">Available</option>
                    <option value="InUse">InUse</option>
                    <option value="InRepair">InRepair</option>
                    <option value="Retired">Retired</option>
                </select>
            </label>
            <label>
                Ubicacion*
                <select formControlName="locationId">
                    <option value="">Seleccione</option>
                    @for(location of locations(); track location.id) {
                    <option [value]="location.id">{{ location.code }} - {{ location.name }}</option>
                    }
                </select>
            </label>
            <label>
                Fecha compra*
                <input type="date" formControlName="purchaseDate" />
            </label>
            <label>
                Fin garantia*
                <input type="date" formControlName="warrantyEnd" />
            </label>
        </div>
        <div class="actions">
            <button type="submit" [disabled]="form.invalid || submitting()"> {{ isEdit ? 'Guardar Cambios' : 'Registrar' }}
            </button>
            <button type="reset">Limpiar</button>
            <a routerLink="/equipment">Cancelar</a>
        </div>
        @if(error()){
        <p>{{ error() }}</p>
        }
        @if(success()){
        <p>Guardado correctamente (simulado)</p>
        }
    </form>
</section>
